<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ValueBet eSoccer Pro</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --apple-bg: #f5f5f7;
            --apple-card: #ffffff;
            --apple-text: #1d1d1f;
            --apple-accent: #0071e3;
            --success: #34c759;
            --danger: #ff3b30;
        }

        body { font-family: 'Inter', sans-serif; background-color: var(--apple-bg); color: var(--apple-text); margin: 0; padding: 20px; }
        .main-layout { display: grid; grid-template-columns: 350px 1fr; gap: 20px; max-width: 1450px; margin: 0 auto; }
        header { grid-column: 1 / -1; text-align: center; margin-bottom: 20px; }
        
        .card { background: var(--apple-card); border-radius: 16px; padding: 20px; box-shadow: 0 4px 20px rgba(0,0,0,0.03); margin-bottom: 20px; }
        h3 { margin: 0 0 15px 0; font-size: 0.85rem; font-weight: 600; text-transform: uppercase; color: #86868b; letter-spacing: 0.05em; border-bottom: 1px solid #f5f5f7; padding-bottom: 8px; }

        .rules-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; }
        .rule-item { font-size: 0.8rem; background: #fbfbfd; padding: 10px; border-left: 3px solid var(--apple-accent); border-radius: 4px; }

        label { display: block; margin-bottom: 4px; font-size: 0.75rem; color: #86868b; }
        input { width: 100%; padding: 10px; border: 1px solid #d2d2d7; border-radius: 8px; font-size: 0.9rem; margin-bottom: 12px; box-sizing: border-box; background: #fafafa; outline: none; }
        input:focus { border-color: var(--apple-accent); background: #fff; }
        
        .btn { width: 100%; padding: 12px; border: none; border-radius: 10px; font-weight: 600; cursor: pointer; transition: 0.2s; font-size: 0.85rem; }
        .btn-blue { background: var(--apple-accent); color: white; }
        .btn-green { background: var(--success); color: white; margin-top: 5px; }
        
        .chart-container { max-width: 650px; margin: 0 auto; }

        table { width: 100%; border-collapse: collapse; font-size: 0.8rem; }
        th { text-align: left; color: #86868b; padding: 10px; border-bottom: 1px solid #f5f5f7; }
        td { padding: 10px; border-bottom: 1px solid #f5f5f7; }

        .status-btn { padding: 5px 10px; border-radius: 6px; border: none; cursor: pointer; font-size: 0.75rem; font-weight: bold; margin-right: 4px; }
        .win { background: #eafaf1; color: #27ae60; }
        .loss { background: #fff5f5; color: #eb5757; }
        .delete-btn { background: none; color: #ff3b30; border: none; cursor: pointer; font-size: 0.75rem; opacity: 0.6; }

        #bankrollDisplay { font-size: 1.8rem; font-weight: 700; color: var(--apple-accent); margin-bottom: 5px; }
        .history-list { max-height: 120px; overflow-y: auto; font-size: 0.8rem; margin-top: 10px; border-top: 1px solid #eee; padding-top: 5px; }
        .history-item { display: flex; justify-content: space-between; padding: 6px 0; border-bottom: 1px solid #fafafa; }
    </style>
</head>
<body>

<header>
    <h1>eSoccer Value Dashboard</h1>
</header>

<div class="card" style="max-width: 1400px; margin: 0 auto 20px auto;">
    <h3>Strat√©giai Szab√°lyok (100% Betart√°s)</h3>
    <div class="rules-grid">
        <div class="rule-item">üéØ <b>Minimum Value:</b> Legal√°bb +10% k√ºl√∂nbs√©g.</div>
        <div class="rule-item">üìâ <b>Minimum Odds:</b> 1.75 alatt nincs fogad√°s.</div>
        <div class="rule-item">üìà <b>Maximum Odds:</b> 3.00 felett nincs fogad√°s.</div>
        <div class="rule-item">üö´ <b>Dupl√°z√°s:</b> Egy meccsre csak egy fogad√°s.</div>
        <div class="rule-item">üí∞ <b>T√©tkezel√©s:</b> Fix 2.00 EUR per m√©rk≈ëz√©s.</div>
    </div>
</div>

<div class="main-layout">
    <div class="sidebar">
        <div class="card">
            <h3>Value Kalkul√°tor</h3>
            <label>Bet365 Odds (Referencia)</label>
            <input type="number" id="b365" step="0.01" placeholder="pl. 1.85">
            <label>Nik√© Odds (T√©nyleges)</label>
            <input type="number" id="nike" step="0.01" placeholder="pl. 2.15">
            <button class="btn btn-blue" onclick="checkValue()">Elemz√©s</button>
            <div id="calcResult" style="text-align:center; margin-top:10px; font-weight:bold; font-size: 0.9rem; display:none; padding: 10px; border-radius: 8px;"></div>
        </div>

        <div class="card">
            <h3>Fogad√°s r√∂gz√≠t√©se</h3>
            <input type="text" id="t1" placeholder="Hazai j√°t√©kos">
            <input type="text" id="t2" placeholder="Vend√©g j√°t√©kos">
            <input type="text" id="tip" placeholder="Tipp">
            <input type="number" id="fOdds" placeholder="Odds">
            <input type="number" id="fVal" placeholder="Value %">
            <button class="btn btn-green" onclick="addBet()">Mehet a napl√≥ba</button>
        </div>

        <div class="card">
            <h3>Bankroll</h3>
            <div id="bankrollDisplay">100.00 EUR</div>
            <label>D√°tum</label>
            <input type="date" id="brDate">
            <label>Z√°r√≥ egyenleg</label>
            <input type="number" id="dailyBankroll" step="0.01">
            <button class="btn btn-blue" onclick="updateBankroll()">R√∂gz√≠t√©s</button>
            <div class="history-list" id="brHistory"></div>
        </div>
    </div>

    <div class="content">
        <div class="card">
            <h3>Teljes√≠tm√©ny G√∂rbe</h3>
            <div class="chart-container">
                <canvas id="bankrollChart"></canvas>
            </div>
        </div>

        <div class="card">
            <h3>Fogad√°si Napl√≥</h3>
            <table>
                <thead>
                    <tr>
                        <th>M√©rk≈ëz√©s</th>
                        <th>Tipp</th>
                        <th>Odds</th>
                        <th>Value</th>
                        <th>Eredm√©ny</th>
                        <th>T√∂rl√©s</th>
                    </tr>
                </thead>
                <tbody id="betBody"></tbody>
            </table>
        </div>
    </div>
</div>

<script>
    let bankrollHistory = JSON.parse(localStorage.getItem('brHistory')) || [{date: 'Start', value: 100.00}];
    let bets = JSON.parse(localStorage.getItem('bets')) || [];
    document.getElementById('brDate').valueAsDate = new Date();

    const ctx = document.getElementById('bankrollChart').getContext('2d');
    let myChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: bankrollHistory.map(h => h.date),
            datasets: [{
                label: 'Bankroll',
                data: bankrollHistory.map(h => h.value),
                borderColor: '#0071e3',
                borderWidth: 3,
                pointRadius: 4,
                tension: 0.3,
                fill: true,
                backgroundColor: 'rgba(0, 113, 227, 0.05)'
            }]
        },
        options: { responsive: true, aspectRatio: 2.2, plugins: { legend: { display: false } } }
    });

    function checkValue() {
        const b = parseFloat(document.getElementById('b365').value);
        const n = parseFloat(document.getElementById('nike').value);
        const res = document.getElementById('calcResult');
        if (b > 1 && n > 1) {
            const v = ((n/b)-1)*100;
            res.style.display = "block";
            let message = `Value: ${v.toFixed(2)}%<br>`;
            let isValid = true;
            if (v < 10) { message += "üõë KEV√âS VALUE"; isValid = false; }
            if (n < 1.75) { message += "üõë ALACSONY ODDS"; isValid = false; }
            if (n > 3.00) { message += "üõë MAGAS ODDS"; isValid = false; }
            if (isValid) {
                message += "‚úÖ MEHET A BET!";
                res.style.backgroundColor = "#eafaf1"; res.style.color = "#27ae60";
            } else {
                res.style.backgroundColor = "#fff5f5"; res.style.color = "#eb5757";
            }
            res.innerHTML = message;
            document.getElementById('fOdds').value = n;
            document.getElementById('fVal').value = v.toFixed(2);
        }
    }

    function updateUI() {
        const currentBalance = bankrollHistory[bankrollHistory.length - 1].value;
        document.getElementById('bankrollDisplay').innerText = currentBalance.toFixed(2) + " EUR";
        const historyDiv = document.getElementById('brHistory');
        historyDiv.innerHTML = '<strong>Ment√©sek:</strong>';
        bankrollHistory.forEach((item, index) => {
            if(index === 0) return;
            historyDiv.innerHTML += `<div class="history-item"><span>${item.date}: ${item.value}‚Ç¨</span><button class="delete-btn" onclick="deleteHistory(${index})">‚úï</button></div>`;
        });
        const tbody = document.getElementById('betBody');
        tbody.innerHTML = '';
        bets.forEach((bet, index) => {
            const row = tbody.insertRow();
            if(bet.status === 'win') row.style.backgroundColor = "#eafaf1";
            if(bet.status === 'loss') row.style.backgroundColor = "#fff5f5";
            row.innerHTML = `<td>${bet.match}</td><td>${bet.tip}</td><td>${bet.odds}</td><td>${bet.val}%</td><td><button class="status-btn win" onclick="markBet(${index}, 'win')">‚úì</button><button class="status-btn loss" onclick="markBet(${index}, 'loss')">‚úó</button></td><td><button class="delete-btn" onclick="deleteBet(${index})">T√∂rl√©s</button></td>`;
        });
        myChart.data.labels = bankrollHistory.map(h => h.date);
        myChart.data.datasets[0].data = bankrollHistory.map(h => h.value);
        myChart.update();
        localStorage.setItem('brHistory', JSON.stringify(bankrollHistory));
        localStorage.setItem('bets', JSON.stringify(bets));
    }

    function updateBankroll() {
        const date = document.getElementById('brDate').value;
        const val = parseFloat(document.getElementById('dailyBankroll').value);
        if(!date || isNaN(val)) return;
        bankrollHistory.push({date, value: val});
        document.getElementById('dailyBankroll').value = '';
        updateUI();
    }

    function addBet() {
        const t1 = document.getElementById('t1').value, t2 = document.getElementById('t2').value,
              tip = document.getElementById('tip').value, odds = document.getElementById('fOdds').value,
              val = document.getElementById('fVal').value;
        if(!t1 || !odds) return;
        bets.unshift({match: t1 + ' - ' + t2, tip, odds, val, status: 'pending'});
        ['t1','t2','tip','fOdds','fVal','b365','nike'].forEach(id => document.getElementById(id).value = '');
        document.getElementById('calcResult').style.display = 'none';
        updateUI();
    }

    function deleteHistory(i) { bankrollHistory.splice(i, 1); updateUI(); }
    function markBet(i, s) { bets[i].status = s; updateUI(); }
    function deleteBet(i) { bets.splice(i, 1); updateUI(); }
    updateUI();
</script>
</body>
</html>